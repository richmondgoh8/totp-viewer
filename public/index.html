<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOTP Viewer | Premium 2FA Experience</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <div class="top-nav">
        <select id="langSelect" class="language-select" aria-label="Select Language">
            <option value="en">English</option>
            <option value="cn">‰∏≠Êñá</option>
        </select>
        <button id="themeToggle" class="nav-btn" aria-label="Toggle Theme">
            <span id="themeIcon">üåô</span>
            <span id="themeText">Dark</span>
        </button>
    </div>

    <div class="container" id="mainContainer">
        <div class="card" id="totpCard">
            <h1 id="titleTxt">TOTP Viewer</h1>
            <p class="subtitle" id="subtitleTxt">Secure Time-Based Passwords</p>

            <div id="mainDashboard">
                <div class="totp-display" id="displayArea">
                    <div class="code-container">
                        <div class="code" id="totpCode">------</div>
                        <button class="copy-btn" id="copyBtn" title="Copy to clipboard">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                        <div class="copy-feedback" id="copyFeedback">COPIED</div>
                    </div>
                    <div class="timer-badge"><span id="timerText">30</span>s <span id="remainingTxt">remaining</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>

                <div class="secret-input-group">
                    <label for="secret" id="labelSecret">Shared Secret</label>
                    <input type="text" id="secret" readonly placeholder="?secret= in URL" autocomplete="off">
                </div>

                <div class="actions mb-30">
                    <button class="btn-secondary" id="toggleValidatorBtn">Validate Code</button>
                    <button class="btn-primary" id="shareBtn" title="Share Account">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="btn-icon">
                            <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                            <polyline points="16 6 12 2 8 6"></polyline>
                            <line x1="12" y1="2" x2="12" y2="15"></line>
                        </svg>
                        <span id="shareBtnTxt">Share</span>
                    </button>
                    <button class="btn-primary" id="addToDashboardBtn" title="Add to Dashboard">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="btn-icon">
                            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                            <polyline points="17 21 17 13 7 13 7 21"></polyline>
                            <polyline points="7 3 7 8 15 8"></polyline>
                        </svg>
                        <span>Add to Dashboard</span>
                    </button>
                    <div class="copy-feedback share-feedback-pos" id="shareFeedback">LINK COPIED</div>
                </div>

                <div id="validatorSection" class="validator-section hidden validator-section-styled">
                    <div id="statusBadge" class="status-badge hidden"></div>
                    <div class="secret-input-group">
                        <label for="validateCode" id="labelVerify">Enter Code to Verify</label>
                        <input type="text" id="validateCode" placeholder="123456" maxlength="6">
                    </div>
                    <div class="secret-input-group">
                        <label for="windowSteps" id="labelSteps">Tolerance Window (Steps: 30s each)</label>
                        <input type="number" id="windowSteps" value="1" min="0" max="20">
                    </div>
                    <button class="btn-primary w-100" id="verifyBtn">Verify Now</button>
                </div>
            </div>
        </div>

        <div class="card" id="accountsDashboard">
            <div class="accounts-header">
                <h2 id="accountsTitle">My Accounts</h2>
                <button class="btn-primary btn-small" id="addNewAccountBtn">+ Add New</button>
            </div>
            <div class="accounts-scroll-wrapper" id="accountsScroll">
                <div id="accountsList" class="accounts-grid">
                    <!-- Accounts will be injected here -->
                </div>
            </div>
            <div class="backup-restore">
                <div class="flex-gap-8">
                    <button class="btn-secondary btn-small" id="exportBtn">Export JSON</button>
                    <button class="btn-secondary btn-small" id="importBtn">Import JSON</button>
                </div>
                <button class="btn-danger btn-small" id="deleteAllBtn">Delete All</button>
                <input type="file" id="importInput" class="hidden" accept=".json" aria-label="Import JSON File">
            </div>
        </div>

        <div id="aboutSection" class="about-section">
            <div class="about-title">
                <span>üõ°Ô∏è</span> <span id="aboutTitleText">About this Project</span>
                <div class="github-btn-wrapper">
                    <!-- Place this tag where you want the button to render. -->
                    <a class="github-button" href="https://github.com/richmondgoh8/totp-viewer"
                        data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large"
                        data-show-count="true" aria-label="Star richmondgoh8/totp-viewer on GitHub">Star</a>
                </div>
            </div>
            <p id="aboutDescText">This is a ultra-secure, client-side TOTP viewer. Your secrets are processed only
                in your browser and never sent to any server. It supports bookmarkable URLs for quick access while
                maintaining a premium glassmorphic aesthetic.</p>
            <div class="about-links">
                <a href="https://buymeacoffee.com/richmondgoh" target="_blank" rel="noopener noreferrer" class="bmc-link">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.42-.512-.215-1.156-.243-2.12-.243h-11.334c-.963 0-1.608.028-2.12.243-.613.257-.882.822-1.001 1.42l-.132.666c-.392 1.986-.423 3.993-.092 5.992.217 1.315.657 2.583 1.304 3.743.896 1.623 2.233 2.946 3.821 3.81 1.256.685 2.651 1.037 4.064 1.031 1.413.006 2.808-.346 4.064-1.031 1.588-.864 2.925-2.187 3.821-3.81.647-1.161 1.087-2.428 1.304-3.743.33-1.999.3-4.006-.092-5.992zm-1.897 5.719c-.19 1.154-.576 2.264-1.144 3.284-.79 1.43-1.97 2.6-3.364 3.363-1.107.604-2.338.913-3.593.908-1.255.005-2.486-.304-3.593-.908-1.394-.763-2.574-1.933-3.364-3.363-.568-1.02-.954-2.13-1.144-3.284-.294-1.78-.266-3.597.082-5.366l.132-.666c.045-.228.1-.318.156-.34.123-.05.544-.067 1.32-.067h11.334c.777 0 1.197.017 1.32.067.056.022.11.112.156.34l.132.666c.348 1.769.376 3.586.082 5.366zM7.228 10.37h9.544c.441 0 .8.359.8.8s-.359.8-.8.8h-9.544c-.441 0-.8-.359-.8-.8s.359-.8.8-.8z" />
                    </svg>
                    <span id="bmcTxt">Buy me a coffee</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Modal for adding/editing account -->
    <div id="accountModal" class="modal-overlay">
        <div class="modal">
            <h2 id="modalTitle" class="mb-20">Add New Account</h2>
            <div class="secret-input-group">
                <label for="modalAccountName" id="labelModalAccountName">Account Name</label>
                <input type="text" id="modalAccountName" placeholder="e.g. Amazon">
            </div>
            <div class="secret-input-group">
                <label for="modalSecret" id="labelModalSecret">Shared Secret</label>
                <input type="text" id="modalSecret" placeholder="JBSWY3DPEHPK3PXP">
            </div>
            <div class="actions">
                <button class="btn-secondary" id="closeModalBtn">Cancel</button>
                <button class="btn-primary" id="saveModalBtn">Save Account</button>
            </div>
        </div>
    </div>

    <script src="./app.js"></script>
</body>

</html>